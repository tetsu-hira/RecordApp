{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AIQ11\\\\Documents\\\\webservice\\\\src\\\\components\\\\Process.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport * as React from 'react'; // import ExcelJS from \"exceljs\";\n// import File from \"./File\";\n// import { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\"\n// import Select from 'react-select';\n// import ReactDOM from \"react-dom\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\n// type Cell = {\n//   name: string\n//   time1: number\n// }\n// const reorder = (\n//   list: ItemType[],\n//   startIndex: number,\n//   endIndex: number\n// ): ItemType[] => {\n//   const result = Array.from(list);\n//   const [removed] = result.splice(startIndex, 1);\n//   result.splice(endIndex, 0, removed);\n//   return result;\n// };\nconst Process = () => {\n  _s();\n\n  const [plan, setPlan] = useState([]);\n  const [time1, setTime1] = useState(0);\n  const [time2, setTime2] = useState(0);\n  const [list, setList] = useState([]);\n  const [data, setData] = useState();\n  const [count, setCount] = useState(0);\n\n  const changeData = e => {\n    setData(e.target.value); // setCount(Math.random());\n  };\n\n  const addList = () => {\n    setList([...list, {\n      id: data,\n      name: data,\n      gross: 0,\n      point: 0,\n      score: 0\n    }]);\n  };\n\n  const handleRemoveTask = index => {\n    const newPlan = [...plan];\n    newPlan.splice(index, 1);\n    setPlan(newPlan);\n  };\n\n  const addPlan = index => {\n    const addName = list.find(elem => list[index] === elem);\n    setPlan([...plan, {\n      name: addName.name,\n      time1: 0,\n      time2: 0,\n      count: 0\n    }]);\n    const result = plan.filter(plans => {\n      return plans.name === list[index].name;\n    });\n    const result1 = result.length + 1;\n    list[index].gross = result1;\n  };\n\n  const addTime1 = (index, minute) => {\n    const targetPlan = plan.find(elem => plan[index] === elem);\n    targetPlan.time1 = targetPlan.time1 + minute;\n    setTime1(targetPlan.time1); // 奇数か偶数で処理を変える\n\n    if (index % 2 === 0) {\n      const nextPlan = plan.find(elem => plan[index + 1] === elem);\n      targetPlan.count = targetPlan.time1 + targetPlan.time2 - (nextPlan.time1 + nextPlan.time2);\n      nextPlan.count = nextPlan.time1 + nextPlan.time2 - (targetPlan.time1 + targetPlan.time2);\n      setCount(targetPlan.count);\n    } else {\n      const prevPlan = plan.find(elem => plan[index - 1] === elem);\n      targetPlan.count = targetPlan.time1 + targetPlan.time2 - (prevPlan.time1 + prevPlan.time2);\n      prevPlan.count = prevPlan.time1 + prevPlan.time2 - (targetPlan.time1 + targetPlan.time2);\n      setCount(targetPlan.count);\n    } // ここから繰り返し処理\n\n\n    for (var i = 0; i < list.length; i++) {\n      const countPlan = list.find(elem => list[i] === elem); // 全試合の合計値をtotalに代入\n\n      const sumCount = plan.filter(plans => {\n        return plans.name === countPlan.name;\n      });\n      const total = sumCount.reduce(function (sum, element) {\n        return sum + element.count;\n      }, 0); // 合計をlistに反映\n\n      const update = list.find(elem => elem.name === countPlan.name);\n      console.log(update.name);\n      update.score = total;\n      console.log(update);\n    } // ここまで繰り返し\n    // コンソールでエラーを回避\n\n\n    console.log(\"ここからエラー回避\");\n    console.log(time1);\n    console.log(count);\n  };\n\n  const addTime2 = (index, minute) => {\n    const targetPlan = plan.find(elem => plan[index] === elem);\n    targetPlan.time2 = targetPlan.time2 + minute;\n    setTime2(targetPlan.time2); // 奇数か偶数で処理を変える\n\n    if (index % 2 === 0) {\n      const nextPlan = plan.find(elem => plan[index + 1] === elem);\n      targetPlan.count = targetPlan.time1 + targetPlan.time2 - (nextPlan.time1 + nextPlan.time2);\n      nextPlan.count = nextPlan.time1 + nextPlan.time2 - (targetPlan.time1 + targetPlan.time2);\n      setCount(targetPlan.count);\n    } else {\n      const prevPlan = plan.find(elem => plan[index - 1] === elem);\n      targetPlan.count = targetPlan.time1 + targetPlan.time2 - (prevPlan.time1 + prevPlan.time2);\n      prevPlan.count = prevPlan.time1 + prevPlan.time2 - (targetPlan.time1 + targetPlan.time2);\n      setCount(targetPlan.count);\n    } // ここから繰り返し処理\n\n\n    if (list.length > 0) {\n      for (var i = 0; i < list.length; i++) {\n        const countPlan = list.find(elem => list[i] === elem); // 全試合の合計値をtotalに代入\n\n        const sumCount = plan.filter(plans => {\n          return plans.name === countPlan.name;\n        });\n        const total = sumCount.reduce(function (sum, element) {\n          return sum + element.count;\n        }, 0); // 合計をlistに反映\n\n        const update = list.find(elem => elem.name === countPlan.name);\n        console.log(update.name);\n        update.score = total;\n        console.log(update);\n      } // ここまで繰り返し\n\n    } // コンソールでエラーを回避\n\n\n    console.log(time2);\n    console.log(count);\n  };\n  /* いずれは実装したい\r\n  const handleClickDownloadButton = async (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>,\r\n    format:  \"xlsx\" | \"csv\"\r\n  ) => {\r\n    e.preventDefault();\r\n      const workbook = new ExcelJS.Workbook();\r\n    workbook.addWorksheet(\"sheet1\");\r\n    const worksheet = workbook.getWorksheet(\"sheet1\");\r\n      worksheet.columns = [\r\n      { header: \"No.\", key: \"\", width: 10 },\r\n      { header: \"工程\", key: \"name\", width: 20},\r\n      { header: \"時間\", key: \"time1\", width: 20}\r\n    ];\r\n      worksheet.addRows(plan);\r\n      const uint8Array =\r\n      format === \"xlsx\"\r\n        ? await workbook.xlsx.writeBuffer() //xlsxの場合\r\n        : await workbook.csv.writeBuffer(); //csvの場合\r\n    const blob = new Blob([uint8Array], { type: \"application/octet-binary \"});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = \"NewFile.\" + format; //フォーマットによって拡張子を変える\r\n    a.click();\r\n    a.remove();\r\n  };\r\n  */\n  // const handleOnDragEnd = (result:any) => {\n  //   const items = Array.from(plan);\n  //   const [reorderedItem] = items.splice(result.source.index, 1);\n  //   items.splice(result.destination.index, 0, reorderedItem);\n  //   setPlan(items);\n  // }\n  // 確認のため設置\n\n\n  console.log(list.length);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Process\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProcessContainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ProcessMain\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProcessList\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"\\u3010\\u8A2D\\u5099\\u4E00\\u89A7\\u3011\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ProcessList__Border\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Head\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"name\",\n                children: \"\\u30C1\\u30FC\\u30E0\\u540D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"gross\",\n                children: \"\\u8A66\\u5408\\u6570\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"point\",\n                children: \"\\u52DD\\u3061\\u70B9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"score\",\n                children: \"\\u5F97\\u5931\\u70B9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"Item\",\n              children: list.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"ItemList\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ItemList__data\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"name\",\n                    children: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"gross\",\n                    children: item.gross\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"point\",\n                    children: item.point\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"score\",\n                    children: item.score\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddPlan\",\n                    onClick: () => addPlan(idx),\n                    children: \"\\u767B\\u9332\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 21\n                }, this)\n              }, item.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Form\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"FormContent\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"FormContent__name\",\n                type: \"text\",\n                id: \"name\",\n                onChange: changeData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"FormContent__button\",\n                type: \"submit\",\n                onClick: addList,\n                children: \"\\u30C1\\u30FC\\u30E0\\u8FFD\\u52A0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Result\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"title\",\n            children: \"\\u3010\\u5DE5\\u7A0B\\u8A2D\\u8A08\\u3011\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Result__Border\",\n            children: plan.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"FlexNumber\",\n                children: idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexNumber__item\",\n                  children: [\"\\u7B2C\", idx / 2 + 1, \"\\u8A66\\u5408\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 42\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"FlexCross\",\n                children: [idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexCross__item\",\n                  children: \"\\u2716\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 42\n                }, this), idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexCross__item\",\n                  children: \"\\u2716\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 42\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"FlexCount\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexCount__flex\",\n                  children: [idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime1(idx, -1),\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 44\n                  }, this), idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime1(idx, 5),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 44\n                  }, this), idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ResultTime\",\n                    children: item.time1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 44\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexCount__flex\",\n                  children: [idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime2(idx, -1),\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 44\n                  }, this), idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime2(idx, 5),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 44\n                  }, this), idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ResultTime\",\n                    children: item.time2\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 44\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"FlexName\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ResultName\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"DeleteButton\",\n                  onClick: () => handleRemoveTask(idx),\n                  children: \"\\u53D6\\u6D88\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"FlexCount\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexCount__flex\",\n                  children: [idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime1(idx, -1),\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 44\n                  }, this), idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime1(idx, 5),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 44\n                  }, this), idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ResultTime\",\n                    children: item.time1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 44\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"FlexCount__flex\",\n                  children: [idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime2(idx, -1),\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 44\n                  }, this), idx % 2 !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"AddCount\",\n                    onClick: () => addTime2(idx, 5),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 44\n                  }, this), idx % 2 === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ResultTime\",\n                    children: item.time2\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 44\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Process, \"o+l/xf1OS5aVdzLUz/ydpPoIF44=\");\n\n_c = Process;\nexport default Process;\n\nvar _c;\n\n$RefreshReg$(_c, \"Process\");","map":{"version":3,"sources":["C:/Users/AIQ11/Documents/webservice/src/components/Process.tsx"],"names":["useState","React","Process","plan","setPlan","time1","setTime1","time2","setTime2","list","setList","data","setData","count","setCount","changeData","e","target","value","addList","id","name","gross","point","score","handleRemoveTask","index","newPlan","splice","addPlan","addName","find","elem","result","filter","plans","result1","length","addTime1","minute","targetPlan","nextPlan","prevPlan","i","countPlan","sumCount","total","reduce","sum","element","update","console","log","addTime2","map","item","idx"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport * as React from 'react';\r\n// import ExcelJS from \"exceljs\";\r\n// import File from \"./File\";\r\n// import { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\"\r\n// import Select from 'react-select';\r\n// import ReactDOM from \"react-dom\";\r\n\r\n\r\ntype Pro = {\r\n  id: number\r\n  name: any\r\n  gross: number\r\n  point: number\r\n  score: number\r\n}\r\n\r\ntype Scr = {\r\n  name: any\r\n  time1: number\r\n  time2: number\r\n  count: number\r\n}\r\n\r\n// type Cell = {\r\n//   name: string\r\n//   time1: number\r\n// }\r\n// const reorder = (\r\n//   list: ItemType[],\r\n//   startIndex: number,\r\n//   endIndex: number\r\n// ): ItemType[] => {\r\n//   const result = Array.from(list);\r\n//   const [removed] = result.splice(startIndex, 1);\r\n//   result.splice(endIndex, 0, removed);\r\n\r\n//   return result;\r\n// };\r\n\r\n\r\nconst Process: React.FC = () => {\r\n  const [ plan, setPlan ] = useState<Scr[]>([]);\r\n  const [ time1, setTime1 ] = useState<number>(0);\r\n  const [ time2, setTime2 ] = useState<number>(0);\r\n  const [ list, setList ] = useState<Pro[]>([]);\r\n  const [ data, setData ] = useState<any>();\r\n  const [ count, setCount ] =useState<number>(0);\r\n\r\n\r\n  const changeData = (e:any) => {\r\n    setData(e.target.value)\r\n    // setCount(Math.random());\r\n  }\r\n  const addList = () => {\r\n    setList([...list, {\r\n      id: data,\r\n      name: data,\r\n      gross: 0,\r\n      point: 0,\r\n      score: 0,\r\n    }]);\r\n  }\r\n\r\n  const handleRemoveTask = (index:number) => {\r\n    const newPlan = [...plan]\r\n    newPlan.splice(index, 1)\r\n    setPlan(newPlan)\r\n  }\r\n\r\n  const addPlan = (index: number) => {\r\n    const addName: any = list.find((elem) => list[index] === elem )\r\n    setPlan([...plan, {name: addName.name, time1: 0, time2: 0, count: 0}]);\r\n    const result: any = plan.filter(plans => {\r\n      return plans.name === list[index].name\r\n    })\r\n    const result1 = result.length + 1;\r\n    list[index].gross = result1;\r\n  }\r\n\r\n\r\n  const addTime1 = (index:number, minute:number) => {\r\n    const targetPlan: Scr = plan.find((elem) => plan[index] === elem)\r\n    targetPlan.time1 = targetPlan.time1 + minute\r\n    setTime1(targetPlan.time1)\r\n    // 奇数か偶数で処理を変える\r\n    if (index % 2 === 0) {\r\n      const nextPlan: Scr = plan.find((elem) => plan[index + 1] === elem);\r\n      targetPlan.count = (targetPlan.time1 + targetPlan.time2) - (nextPlan.time1 + nextPlan.time2);\r\n      nextPlan.count = (nextPlan.time1 + nextPlan.time2) - (targetPlan.time1 + targetPlan.time2);\r\n      setCount(targetPlan.count);\r\n    } else {\r\n      const prevPlan: Scr = plan.find((elem) => plan[index - 1] === elem);\r\n      targetPlan.count = (targetPlan.time1 + targetPlan.time2) - (prevPlan.time1 + prevPlan.time2);\r\n      prevPlan.count = (prevPlan.time1 + prevPlan.time2) - (targetPlan.time1 + targetPlan.time2);\r\n      setCount(targetPlan.count);\r\n    }\r\n    // ここから繰り返し処理\r\n    for ( var i = 0; i < list.length; i++ ) {\r\n      const countPlan: any = list.find((elem) => list[i] === elem)\r\n      // 全試合の合計値をtotalに代入\r\n      const sumCount: any = plan.filter(plans => {\r\n        return plans.name === countPlan.name\r\n      })\r\n      const total = sumCount.reduce(function(sum: number, element: any) {\r\n        return sum + element.count;\r\n      }, 0);\r\n      // 合計をlistに反映\r\n      const update: any = list.find((elem) => elem.name === countPlan.name);\r\n      console.log(update.name);\r\n      update.score = total;\r\n      console.log(update);\r\n    }\r\n    // ここまで繰り返し\r\n    // コンソールでエラーを回避\r\n    console.log(\"ここからエラー回避\");\r\n    console.log(time1);\r\n    console.log(count);\r\n  }\r\n  const addTime2 = (index:number, minute:number) => {\r\n    const targetPlan: any = plan.find((elem) => plan[index] === elem )\r\n    targetPlan.time2 = targetPlan.time2 + minute\r\n    setTime2(targetPlan.time2)\r\n    // 奇数か偶数で処理を変える\r\n    if (index % 2 === 0) {\r\n      const nextPlan: Scr = plan.find((elem) => plan[index + 1] === elem);\r\n      targetPlan.count = (targetPlan.time1 + targetPlan.time2) - (nextPlan.time1 + nextPlan.time2);\r\n      nextPlan.count = (nextPlan.time1 + nextPlan.time2) - (targetPlan.time1 + targetPlan.time2);\r\n      setCount(targetPlan.count);\r\n    } else {\r\n      const prevPlan: Scr = plan.find((elem) => plan[index - 1] === elem);\r\n      targetPlan.count = (targetPlan.time1 + targetPlan.time2) - (prevPlan.time1 + prevPlan.time2);\r\n      prevPlan.count = (prevPlan.time1 + prevPlan.time2) - (targetPlan.time1 + targetPlan.time2);\r\n      setCount(targetPlan.count);\r\n    }\r\n    // ここから繰り返し処理\r\n    if (list.length > 0) {\r\n      for ( var i = 0; i < list.length; i++ ) {\r\n        const countPlan: any = list.find((elem) => list[i] === elem)\r\n        // 全試合の合計値をtotalに代入\r\n        const sumCount: any = plan.filter(plans => {\r\n          return plans.name === countPlan.name\r\n        })\r\n        const total = sumCount.reduce(function(sum: number, element: any) {\r\n          return sum + element.count;\r\n        }, 0);\r\n        // 合計をlistに反映\r\n        const update: any = list.find((elem) => elem.name === countPlan.name);\r\n        console.log(update.name);\r\n        update.score = total;\r\n        console.log(update);\r\n      }\r\n      // ここまで繰り返し\r\n    }\r\n    // コンソールでエラーを回避\r\n    console.log(time2);\r\n    console.log(count);\r\n  }\r\n\r\n  /* いずれは実装したい\r\n  const handleClickDownloadButton = async (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>,\r\n    format:  \"xlsx\" | \"csv\"\r\n  ) => {\r\n    e.preventDefault();\r\n\r\n    const workbook = new ExcelJS.Workbook();\r\n    workbook.addWorksheet(\"sheet1\");\r\n    const worksheet = workbook.getWorksheet(\"sheet1\");\r\n\r\n    worksheet.columns = [\r\n      { header: \"No.\", key: \"\", width: 10 },\r\n      { header: \"工程\", key: \"name\", width: 20},\r\n      { header: \"時間\", key: \"time1\", width: 20}\r\n    ];\r\n\r\n    worksheet.addRows(plan);\r\n\r\n    const uint8Array =\r\n      format === \"xlsx\"\r\n        ? await workbook.xlsx.writeBuffer() //xlsxの場合\r\n        : await workbook.csv.writeBuffer(); //csvの場合\r\n    const blob = new Blob([uint8Array], { type: \"application/octet-binary \"});\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = \"NewFile.\" + format; //フォーマットによって拡張子を変える\r\n    a.click();\r\n    a.remove();\r\n  };\r\n  */\r\n\r\n  // const handleOnDragEnd = (result:any) => {\r\n  //   const items = Array.from(plan);\r\n  //   const [reorderedItem] = items.splice(result.source.index, 1);\r\n  //   items.splice(result.destination.index, 0, reorderedItem);\r\n\r\n  //   setPlan(items);\r\n  // }\r\n\r\n  // 確認のため設置\r\n  console.log(list.length);\r\n\r\n\r\n  return (\r\n    <div className=\"Process\">\r\n      <div className=\"ProcessContainer\">\r\n        <div className=\"ProcessMain\">\r\n          <div className=\"ProcessList\">\r\n            <h1>【設備一覧】</h1>\r\n            <div className=\"ProcessList__Border\">\r\n              <div className=\"Head\">\r\n                <div className=\"name\">チーム名</div>\r\n                <div className=\"gross\">試合数</div>\r\n                <div className=\"point\">勝ち点</div>\r\n                <div className=\"score\">得失点</div>\r\n                <div className=\"space\"></div>\r\n              </div>\r\n              <ul className=\"Item\">\r\n                { list.map((item:Pro, idx: number) => (\r\n                  <li className=\"ItemList\" key={item.name}>\r\n                    <div className=\"ItemList__data\">\r\n                      <div className=\"name\">{item.name}</div>\r\n                      <div className=\"gross\">{item.gross}</div>\r\n                      <div className=\"point\">{item.point}</div>\r\n                      <div className=\"score\">{item.score}</div>\r\n                      <button className=\"AddPlan\" onClick={()=> addPlan(idx)}>登録</button>\r\n                    </div>\r\n                </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n            <div className=\"Form\">\r\n              <div className=\"FormContent\">\r\n                <input className=\"FormContent__name\" type=\"text\" id=\"name\" onChange={changeData}></input>\r\n                <button className=\"FormContent__button\" type=\"submit\" onClick={addList}>チーム追加</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"Result\">\r\n            <h1 className=\"title\">【工程設計】</h1>\r\n              <div className=\"Result__Border\">\r\n                { plan.map((item, idx: number) => (\r\n                  <div className=\"Flex\" key={idx}>\r\n                    <div className=\"FlexNumber\">\r\n                      { idx % 2 === 0 && <div className=\"FlexNumber__item\">第{idx/2+1}試合</div> }\r\n                    </div>\r\n                    <div className=\"FlexCross\">\r\n                      { idx % 2 !== 0 && <div className=\"FlexCross__item\">✖</div> }\r\n                      { idx % 2 !== 0 && <div className=\"FlexCross__item\">✖</div> }\r\n                    </div>\r\n                    <div className=\"FlexCount\">\r\n                      <div className=\"FlexCount__flex\">\r\n                        { idx % 2 === 0 && <button className=\"AddCount\" onClick={()=> addTime1(idx, -1)}>-</button> }\r\n                        { idx % 2 === 0 && <button className=\"AddCount\" onClick={()=> addTime1(idx, 5)}>+</button> }\r\n                        { idx % 2 !== 0 && <div className=\"ResultTime\">{item.time1}</div> }\r\n                      </div>\r\n                      <div className=\"FlexCount__flex\">\r\n                        { idx % 2 === 0 && <button className=\"AddCount\" onClick={()=> addTime2(idx, -1)}>-</button> }\r\n                        { idx % 2 === 0 && <button className=\"AddCount\" onClick={()=> addTime2(idx, 5)}>+</button> }\r\n                        { idx % 2 !== 0 && <div className=\"ResultTime\">{item.time2}</div> }\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"FlexName\">\r\n                      <div className=\"ResultName\">{item.name}</div>\r\n                      <button className=\"DeleteButton\" onClick={()=> handleRemoveTask(idx)}>取消</button>\r\n                    </div>\r\n                    <div className=\"FlexCount\">\r\n                      <div className=\"FlexCount__flex\">\r\n                        { idx % 2 !== 0 && <button className=\"AddCount\" onClick={()=> addTime1(idx, -1)}>-</button> }\r\n                        { idx % 2 !== 0 && <button className=\"AddCount\" onClick={()=> addTime1(idx, 5)}>+</button> }\r\n                        { idx % 2 === 0 && <div className=\"ResultTime\">{item.time1}</div> }\r\n                      </div>\r\n                      <div className=\"FlexCount__flex\">\r\n                        { idx % 2 !== 0 && <button className=\"AddCount\" onClick={()=> addTime2(idx, -1)}>-</button> }\r\n                        { idx % 2 !== 0 && <button className=\"AddCount\" onClick={()=> addTime2(idx, 5)}>+</button> }\r\n                        { idx % 2 === 0 && <div className=\"ResultTime\">{item.time2}</div> }\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )) }\r\n              </div>\r\n            <div>\r\n              {/* <button onClick={(e) => handleClickDownloadButton(e, \"xlsx\")}>\r\n                Excel印刷\r\n              </button> */}\r\n              {/* <button onClick={(e) => handleClickDownloadButton(e, \"csv\")}>\r\n                CSV形式\r\n              </button> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Process;"]},"metadata":{},"sourceType":"module"}